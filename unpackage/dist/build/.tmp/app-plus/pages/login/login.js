(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0abf":function(e,t,n){"use strict";n.r(t);var r=n("1c79"),o=n("62a0");for(var i in o)"default"!==i&&function(e){n.d(t,e,function(){return o[e]})}(i);n("fc47");var a=n("2877"),s=Object(a["a"])(o["default"],r["a"],r["b"],!1,null,null,null);t["default"]=s.exports},"1c79":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement;e._self._c},o=[];n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},"62a0":function(e,t,n){"use strict";n.r(t);var r=n("ac32"),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);t["default"]=o.a},ac32:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=u(n("a34a")),i=n("2f62"),a=u(n("2ed9")),s=n("8020");function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return d(e)||f(e)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function d(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function g(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,o)}function h(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){g(i,r,o,a,s,"next",e)}function s(e){g(i,r,o,a,s,"throw",e)}a(void 0)})}}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){v(e,t,n[t])})}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(){return n.e("components/pull-up").then(n.bind(null,"9d87"))},m={data:function(){return{isShowOauth:!1,showProvider:{weixin:!1,qq:!1,sinaweibo:!1,xiaomi:!1},SellerNo:"",SellerName:"",UserPhone:"",PassWord:"",logining:!1,SellerList:[]}},components:{pullUp:S},onLoad:function(){this.loadExecution(),this.isShowOauth=!0,this.getProvider()},computed:p({},(0,i.mapState)(["userInfo"])),methods:p({},(0,i.mapMutations)(["login","setToken"]),{getSellerList:function(){var e=h(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this,e.next=3,this.$http.GET("API/GetSellerList");case 3:n=e.sent.data,n.length>0&&(t.SellerName=n[0].SellerName,t.SellerNo=n[0].SellerNo),t.SellerList=l(n);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),toggleTab:function(){this.$refs.picker.show()},onConfirm:function(e){var t=this;t.SellerName=e.SellerName,t.SellerNo=e.SellerNo},inputChange:function(e){var t=e.currentTarget.dataset.key;this[t]=e.detail.value},toRegist:function(){this.$api.msg("去注册")},toRevPass:function(){this.$api.msg("去修改密码")},toLogin:function(){var t=h(o.default.mark(function t(){var n,r,i,u,l,c,f;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=this.SellerNo,r=this.SellerName,i=this.UserPhone,u=this.PassWord,l={PassWord:u,UserPhone:i,SellerNo:n,SellerName:r,OpenId:""},(0,s.graceRules)(l,a.default.loginRule)){t.next=4;break}return t.abrupt("return",!1);case 4:return(0,s.graceShowLoading)("登陆中···"),t.next=7,this.$http.POST("API/PostEn",{Content:this.PassWord});case 7:return l.PassWord=t.sent.details,t.next=10,this.$http.POST("API/SetLogin",l);case 10:c=t.sent,(0,s.graceHideLoading)(),f=p({},c.data.userInfo),f.isRecRebate=c.data.isRecRebate,f.IsOnlyGrand=c.data.IsOnlyGrand,f.IsOrder=c.data.IsOrder,f.IsPay=c.data.IsPay,this.login(f),this.setToken(c.details),e.switchTab({url:"/pages/index/index"});case 20:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),loadExecution:function(){try{var t=e.getStorageSync("launchFlag");t?this.token?(console.log(r(this.userInfo," at pages\\login\\login.vue:166")),e.switchTab({url:"/pages/index/index"})):this.getSellerList():e.reLaunch({url:"/pages/index/guide"})}catch(n){e.reLaunch({url:"/pages/index/guide"})}},oauthLogin:function(t){e.showLoading(),console.log(r(t," at pages\\login\\login.vue:184")),e.login({provider:t,success:function(n){console.log(r("success: "+JSON.stringify(n)," at pages\\login\\login.vue:188")),e.getUserInfo({provider:t,success:function(t){console.log(r("用户信息："+JSON.stringify(t.userInfo)," at pages\\login\\login.vue:193")),e.hideLoading()}})},fail:function(t){e.hideLoading(),console.log(r("fail: "+JSON.stringify(t)," at pages\\login\\login.vue:218"))}})},getProvider:function(){var t=this;e.getProvider({service:"oauth",success:function(n){console.log(r(n," at pages\\login\\login.vue:227")),e.hideLoading();for(var o=n.provider.length,i=0;i<o;i++)console.log(r(n.provider[i]," at pages\\login\\login.vue:232")),t.showProvider[n.provider[i]]=!0;0==n.provider.length&&(t.isShowOauth=!1)}})}})};t.default=m}).call(this,n("6e42")["default"],n("0de9")["default"])},ddda:function(e,t,n){},fc47:function(e,t,n){"use strict";var r=n("ddda"),o=n.n(r);o.a}},[["4f11","common/runtime","common/vendor"]]]);